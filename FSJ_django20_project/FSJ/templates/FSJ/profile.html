{% extends "FSJ/base_with_banner.html" %}
{% load i18n %} {# NOTE YOU MUST LOAD i18n to every HTML page even though it's also loaded to base.html #}

{# A standardized "my profile" across all user types which displays all of their form fields with some being disabled #}
{# Also the same template used by the Coordinator to edit the profile of other users, but with the respective fields that were disabled being enabled #}
{% block heading %}
    {# Translators: Profile page heading #}
    {% trans "Profile" %}
{% endblock %}

{% block content %}
    <form action='{{ context.url }}' method='post'>
        {% csrf_token %}
	
	{% if form.non_field_errors %}
	  <ul>
	    {% for error in form.non_field_errors %}
	      <li>{{ error }}</li>
	      {% endfor %}
	    </ul>
	{% endif %}
	
	{% for field in form %}
	    <label>
		{{field.label_tag}}
	    </label>
	    <div class='form-group {% if field.errors %} has-error {% endif %}'>
		{% if field.field.widget.input_type == 'select' %}
		    <select id="{{field.id_for_label}}" name="{{field.name}}">
			{% for val, name in field.field.widget.choices %}
			    <option value="{{val}}" {% if field.value == val %} selected {% endif %}>
				{{name}}
			    </option>
			{% endfor %}
		    </select>
		{% else %}
		    <input class="form-control" type="{{field.field.widget.input_type}}" id="{{field.id_for_label}}" 
						name="{{field.name}}" {% if field.value %} value="{{field.value}}" {% else %} value="" {% endif %}
						{% if field.field.disabled %} disabled {% endif %} >
		{% endif %}
		<div>
		    {{ field.errors }}
		</div>
	    </div>
	    {% if field.help_text %}
		<p class='help-block'>
		    {{ field.help_text }}
		</p>
	    {% endif %}
	{% endfor %}
        {# Save button on user profile#}
        <input type='submit' value={% trans "Save" %}>
    </form>
{% endblock %}